(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{ABQg:function(e,a,t){e.exports={deleteSealPage:"antd-pro-pages-decrypt-index-deleteSealPage",wishUkeyPage:"antd-pro-pages-decrypt-index-wishUkeyPage",pinInput:"antd-pro-pages-decrypt-index-pinInput",pinForm:"antd-pro-pages-decrypt-index-pinForm",htmlBtnBox:"antd-pro-pages-decrypt-index-htmlBtnBox",htmlBtn:"antd-pro-pages-decrypt-index-htmlBtn",background:"antd-pro-pages-decrypt-index-background",wishScanPage:"antd-pro-pages-decrypt-index-wishScanPage",wishScanTitle:"antd-pro-pages-decrypt-index-wishScanTitle",wishScanBody:"antd-pro-pages-decrypt-index-wishScanBody",scanBox:"antd-pro-pages-decrypt-index-scanBox",wishScanFooter:"antd-pro-pages-decrypt-index-wishScanFooter",scanTip:"antd-pro-pages-decrypt-index-scanTip",scanErr:"antd-pro-pages-decrypt-index-scanErr",errFormItem:"antd-pro-pages-decrypt-index-errFormItem",editPwd:"antd-pro-pages-decrypt-index-editPwd"}},XoTb:function(e,a,t){e.exports={ukeyNonePage:"antd-pro-components-ukey-none-index-ukeyNonePage",noneImage:"antd-pro-components-ukey-none-index-noneImage",noneText:"antd-pro-components-ukey-none-index-noneText",noMarginTop:"antd-pro-components-ukey-none-index-noMarginTop"}},Yq2B:function(e,a,t){"use strict";t.r(a);t("+L6B");var n=t("2/Rp"),r=(t("sRBo"),t("kaz8")),o=(t("5NDa"),t("5rEg")),c=t("qLMh"),s=t("9og8"),i=(t("y8nQ"),t("Vl3Y")),l=t("tJVT"),p=t("q1tI"),d=t.n(p),m=t("9kvl"),u=t("Ty5D"),g=t("ABQg"),b=t.n(g),N=t("D1Df"),f=t.n(N),y=t("XoTb"),v=t.n(y),h=t("nvA3"),S=t.n(h),O=function(e){var a=e.imgSrc,t=e.noneText,n=e.noMarginTop,r=e.children;return d.a.createElement("div",{className:v.a.ukeyNonePage},d.a.createElement("div",{className:n?"".concat(v.a.noneImage," ").concat(v.a.noMarginTop):v.a.noneImage},d.a.createElement("img",{src:a||S.a})),d.a.createElement("div",{className:v.a.noneText},t),r)},j=Object(m["a"])((function(e){var a=e.indexPageModel;return{state:a}}))(Object(u["n"])(O)),w=t("L2qd"),I=t("Tex+"),E=t("ntyT"),T=t("+n12"),x=t("z0WU"),C=void 0,P=function(e){var a=e.dispatch,t=e.state,m=e.location,u=m.pathname,g=m.query,N=g.subjectId,y=g.ouid,v=Object(p["useState"])(!1),h=Object(l["a"])(v,2),S=h[0],O=h[1],P=Object(p["useState"])(!1),B=Object(l["a"])(P,2),M=B[0],k=B[1],L=i["a"].useForm(),A=Object(l["a"])(L,1),F=A[0],R=Object(x["e"])(u),D=t.withdrawalUrl,U=t.withdrawalResult,J=t.isLogin,_=t.providerName,V="e\u7b7e\u76fe",z=Object(p["useState"])(null),q=Object(l["a"])(z,2),H=q[0],K=q[1],Y=Object(p["useState"])(null),G=Object(l["a"])(Y,2),Q=G[0],W=G[1],X=Object(p["useState"])("\u5f53\u524d\u672a\u767b\u5f55\uff0c\u8bf7\u626b\u7801\u767b\u5f55"),Z=Object(l["a"])(X,2),$=Z[0],ee=Z[1],ae=Object(p["useRef"])(),te=Object(p["useRef"])(),ne=Object(p["useState"])(null),re=Object(l["a"])(ne,2),oe=re[0],ce=re[1],se=Object(p["useState"])(0),ie=Object(l["a"])(se,2),le=ie[0],pe=ie[1],de="\u8bf7\u63d2\u5165\u539f\u59cbUKey,\u7136\u540e\u518d\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01",me=Object(p["useState"])(null),ue=Object(l["a"])(me,2),ge=ue[0],be=ue[1],Ne=Object(p["useState"])(!1),fe=Object(l["a"])(Ne,2),ye=fe[0],ve=fe[1],he="\u4fee\u6539PIN\u7801";Object(p["useEffect"])((function(){if("CA_MOBILE"==g.wishType){k(!1),O(!0);var e=JSON.parse(localStorage.getItem("sealData"));a({type:"indexPageModel/SetDeleteInfos",payload:{clientCode:R,sourceName:e?e.sessionjson.sourceName:"CA_MOBILE",providerName:localStorage.getItem("providerName")?localStorage.getItem("providerName"):"e\u7b7e\u76fe"}})}else if("CA_UKEY"==g.wishType||"KG_UKEY"==g.wishType){var t=g.subjectId;k(!0),O(!1),Object(I["u"])(R).then((function(e){var a=0;e&&e instanceof Array&&e.forEach((function(e){e.subjectID==t&&(a=1)})),1!=a&&(a=2),pe(a)}))}var n="";if(g.password){n=g.password;var r=!!n;F.setFieldsValue({remember:r,password:n}),C.onFinish()}else Object(I["v"])(R,g.subjectId).then((function(e){e?(e=T["a"].decode(e),F.setFieldsValue({password:e,remember:!!e})):F.setFieldsValue({password:"",remember:!1})}))}),[]);var Se=function(e){g.password&&(e.password=g.password);var a=N;e.password?Object(I["n"])(R,a,e.password,g.wishType).then((function(a){if("success"==a){be(null),Object(T["vb"])("subjectsId","");var t={clientCode:String(R),version:g.version||"",optionInfo:{optionName:"delSign",optionTypeInfo:{logType:g.logType||"",logSubType:g.logSubType||""},optionResult:""},documentName:g.documentName||"",documentID:g.documentID||"",appName:g.appName||"",signSN:g.signSN||"",signName:g.signName||"",subjectID:g.subjectId||""};Object(E["A"])(R,t).then((function(e){e.data.code})),Object(I["J"])(R,g.subjectId,e.remember?e.password:""),"cloudReader"!=g.appName&&"iSignatureHTML5"!=g.appName&&eSign.UrlContainer.SetResult(JSON.stringify({wishResult:"0"}))}else be(a),Object(I["J"])(R,g.subjectId,"")})):Object(I["J"])(R,g.subjectId,"")},Oe=function(){var e=Object(s["a"])(Object(c["a"])().mark((function e(){var t;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={clientCode:R,sourceName:"CA_MOBILE",providerName:localStorage.getItem("providerName")?localStorage.getItem("providerName"):"e\u7b7e\u76fe"},Object(E["h"])(t).then((function(e){a({type:"indexPageModel/providerName",payload:{providerName:e.data.CAProviderList[0].providerName}})})),Object(E["i"])(t).then((function(e){var a=e.data.data;K(a.url),W(e.data.reMark),Object(T["vb"])("scanTypeTip",e.data.reMark,1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(p["useEffect"])((function(){H||clearInterval(te.current)}),[H]),Object(p["useEffect"])((function(){if("CA_MOBILE"==g.wishType)if(0==J)"cloudReader"!=g.appName&&"iSignatureHTML5"!=g.appName&&eSign.UrlContainer.SetTitle("\u626b\u7801\u767b\u5f55"),Oe(),te.current=setInterval((function(){je()}),1e3);else{var e=JSON.parse(localStorage.getItem("sealData")),t={clientCode:R,sourceName:"CA_MOBILE",providerName:_};Object(E["g"])(t).then((function(t){if(0==t.data.code){"cloudReader"!=g.appName&&"iSignatureHTML5"!=g.appName&&eSign.UrlContainer.SetTitle("\u64a4\u9500\u7b7e\u7ae0");var n={wishResult:"1",logOutSessionJson:{sourcesType:1,clientCode:String(R)}};"cloudReader"!=g.appName&&"iSignatureHTML5"!=g.appName&&eSign.UrlContainer.SetStatus(JSON.stringify(n));var r="";t.data.subjectLists[0].identityInfo&&(r=t.data.subjectLists[0].identityInfo.ouid),y!=r?(ce(!1),ee("\u5f53\u524d\u767b\u5f55\u8d26\u53f7\u4e0d\u80fd\u64a4\u9500\u6b64\u5370\u7ae0\uff0c\u8bf7\u91cd\u65b0\u626b\u7801\u767b\u5f55"),a({type:"indexPageModel/logout",payload:{providerName:_,clientCode:R,sourceName:"CA_MOBILE"}}),Oe()):(clearInterval(te.current),a({type:"indexPageModel/SetDeleteInfos",payload:{clientCode:R,sourceName:e?e.sessionjson.sourceName:"CA_MOBILE",providerName:localStorage.getItem("providerName")?localStorage.getItem("providerName"):"e\u7b7e\u76fe"}}))}}))}}),[J]);var je=function(){var e=Object(s["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a({type:"indexPageModel/GetLoginResult",payload:{clientCode:R,sourceName:"CA_MOBILE"}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(s["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a({type:"indexPageModel/GetDeleteResult",payload:{clientCode:R,sourceName:"CA_MOBILE"}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(e){ve(!1),"editSuccess"==e&&(Object(I["J"])(R,g.subjectId,""),F.setFieldsValue({password:""}),F.setFieldsValue({remember:!1}))},Ee=function(e){};Object(p["useEffect"])((function(){"CA_MOBILE"==g.wishType&&(ae.current=setInterval((function(){we()}),2e3))}),[D]),Object(p["useEffect"])((function(){if("CA_MOBILE"==g.wishType&&U){var e={wishResult:"0",subjectId:N,logOutSessionJson:{sourcesType:1,clientCode:String(R)}},a={clientCode:String(R),version:g.version||"",optionInfo:{optionName:"delSign",optionTypeInfo:{logType:g.logType||"",logSubType:g.logSubType||""},optionResult:""},documentName:g.documentName||"",documentID:g.documentID||"",appName:g.appName||"",signSN:g.signSN||"",signName:g.signName||"",subjectID:g.subjectId||""};Object(E["A"])(R,a).then((function(e){e.data.code})),clearInterval(ae.current),"cloudReader"!=g.appName&&"iSignatureHTML5"!=g.appName&&eSign.UrlContainer.SetResult(JSON.stringify(e))}}),[U]);var Te=function(e){var a=e.target.value;a||be(null)};return d.a.createElement("div",{className:"CA_MOBILE"==g.wishType?"".concat(b.a.deleteSealPage," ").concat(b.a.background):b.a.deleteSealPage},!ye&&d.a.createElement("div",null,M&&1==le&&d.a.createElement("div",{className:b.a.wishUkeyPage},d.a.createElement(i["a"],{form:F,labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:!1},onFinish:Se,autoComplete:"off",className:"".concat(b.a.pinForm," wishPinForm")},d.a.createElement(i["a"].Item,{label:"UKey PIN\u7801\uff1a",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165PIN\u7801"}]},d.a.createElement(o["a"].Password,{onChange:Te,className:b.a.pinInput})),ge&&d.a.createElement(i["a"].Item,{className:"".concat(b.a.errFormItem," wishErrFormItem"),name:"errTip",wrapperCol:{offset:6,span:18}},d.a.createElement("span",null,ge)),d.a.createElement(i["a"].Item,null,d.a.createElement(i["a"].Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:6,span:18}},d.a.createElement(r["a"],null,"\u8bb0\u4f4fPIN\u7801")),d.a.createElement("span",{onClick:function(){ve(!0)},className:b.a.editPwd},"\u4fee\u6539PIN\u7801")),d.a.createElement(i["a"].Item,{className:b.a.htmlBtnBox},d.a.createElement(n["a"],{className:b.a.htmlBtn,type:"primary",htmlType:"submit"},"\u786e\u5b9a")))),M&&2==le&&d.a.createElement("div",{className:b.a.wishUkeyErrPage},d.a.createElement(j,{noneText:de})),S&&d.a.createElement("div",{className:b.a.wishScanPage},D&&d.a.createElement("div",null,d.a.createElement("div",{className:b.a.wishScanTitle},V),d.a.createElement("div",{className:b.a.wishScanBody},d.a.createElement("div",{className:b.a.scanBox},D&&(D.startsWith("http")?d.a.createElement(f.a,{size:160,value:D}):d.a.createElement("img",{style:{width:"200px",height:"200px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},src:"data:image/png;base64,"+D})))),d.a.createElement("div",{className:b.a.wishScanFooter},d.a.createElement("div",{className:b.a.scanTip},Object(T["z"])("scanTypeTip")?Object(T["z"])("scanTypeTip"):"\u8bf7\u4f7f\u7528\u652f\u4ed8\u5b9d/\u5fae\u4fe1\u6216e\u7b7e\u5b9dAPP\u626b\u7801"))),(0==J||oe)&&d.a.createElement("div",null,d.a.createElement("div",{className:b.a.wishScanTitle},V),d.a.createElement("div",{className:b.a.wishScanBody},d.a.createElement("div",{className:b.a.scanBox},H&&(H.startsWith("http")?d.a.createElement(f.a,{size:160,value:H}):d.a.createElement("img",{style:{width:"200px",height:"200px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},src:"data:image/png;base64,"+H}))),H&&$&&d.a.createElement("div",{style:{color:"red",fontSize:"14px",margin:"5px 0"}},$)),d.a.createElement("div",{className:b.a.wishScanFooter},d.a.createElement("div",{className:b.a.scanTip},Q))))),ye&&d.a.createElement(w["a"],{title:he,onSubmit:function(e){Ee(e)},onshow:Ie}))};a["default"]=Object(m["a"])((function(e){var a=e.indexPageModel;return{state:a}}))(Object(u["n"])(P))}}]);