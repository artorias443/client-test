(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"8mW0":function(e,t,a){e.exports={ukeyDeletePage:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-ukeyDeletePage",wishUkeyPage:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-wishUkeyPage",pinInput:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-pinInput",pinForm:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-pinForm",pinForm1:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-pinForm1",htmlBtnBox:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-htmlBtnBox",htmlBtn:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-htmlBtn",wishScanPage:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-wishScanPage",wishScanTitle:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-wishScanTitle",wishScanBody:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-wishScanBody",scanBox:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-scanBox",wishScanFooter:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-wishScanFooter",scanTip:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-scanTip",scanErr:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-scanErr",errFormItem:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-errFormItem",editPwd:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-editPwd",toolbar:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-toolbar",accountSwitch:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-accountSwitch",radioGroup:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-radioGroup",radio:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-radio",frontPage:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-frontPage",mode:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-mode",personImg:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-personImg",iframeContainer:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-iframeContainer",iframeContainer1:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-iframeContainer1",iframe:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-iframe",errorTips:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-errorTips",mt10:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-mt10",triggerUkey:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-triggerUkey",select:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-select","ant-select-selector":"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-ant-select-selector",switch:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-switch",switchText:"antd-pro-pages-delete-seal-compoents-usp-ukey-delete-index-switchText"}},HnXX:function(e,t,a){e.exports={scanDeletePage:"antd-pro-pages-delete-seal-compoents-scan-delete-index-scanDeletePage",wishScanPage:"antd-pro-pages-delete-seal-compoents-scan-delete-index-wishScanPage",wishScanTitle:"antd-pro-pages-delete-seal-compoents-scan-delete-index-wishScanTitle",wishScanBody:"antd-pro-pages-delete-seal-compoents-scan-delete-index-wishScanBody",scanBox:"antd-pro-pages-delete-seal-compoents-scan-delete-index-scanBox",wishScanFooter:"antd-pro-pages-delete-seal-compoents-scan-delete-index-wishScanFooter",scanTip:"antd-pro-pages-delete-seal-compoents-scan-delete-index-scanTip",scanErr:"antd-pro-pages-delete-seal-compoents-scan-delete-index-scanErr",errFormItem:"antd-pro-pages-delete-seal-compoents-scan-delete-index-errFormItem"}},J0qb:function(e,t,a){e.exports={tyDeletePage:"antd-pro-pages-delete-seal-compoents-ty-delete-index-tyDeletePage",wishScanTitle:"antd-pro-pages-delete-seal-compoents-ty-delete-index-wishScanTitle",wishScanBody:"antd-pro-pages-delete-seal-compoents-ty-delete-index-wishScanBody",scanBox:"antd-pro-pages-delete-seal-compoents-ty-delete-index-scanBox",wishScanFooter:"antd-pro-pages-delete-seal-compoents-ty-delete-index-wishScanFooter",scanTip:"antd-pro-pages-delete-seal-compoents-ty-delete-index-scanTip",scanErr:"antd-pro-pages-delete-seal-compoents-ty-delete-index-scanErr",errFormItem:"antd-pro-pages-delete-seal-compoents-ty-delete-index-errFormItem",personBox:"antd-pro-pages-delete-seal-compoents-ty-delete-index-personBox",personNameLabel:"antd-pro-pages-delete-seal-compoents-ty-delete-index-personNameLabel",loginOutBtn:"antd-pro-pages-delete-seal-compoents-ty-delete-index-loginOutBtn"}},Rlbl:function(e,t,a){"use strict";a.r(t);a("Znn+");var n=a("ZTPi"),r=(a("OaEy"),a("2fM7")),c=a("qLMh"),o=a("9og8"),s=a("tJVT"),l=a("q1tI"),i=a.n(l),u=a("9kvl"),d=a("Ty5D"),p=a("tuei"),m=a.n(p),f=a("HnXX"),b=a.n(f),g=a("D1Df"),y=a.n(g),h=a("+n12"),O=a("Tex+"),j=a("Qyje"),S=a.n(j),w=a("ntyT"),x=function(e){var t=e.dispatch,a=e.state,n=e.clientCode,r=e.onRef,u=e.location.query,d=localStorage.getItem("deleteSealCode");d&&"0"!=d&&d!=n&&(n=d);var p=Object(h["Z"])(location.href,"documentName=","&signSN");if(p){var m=Object(h["wb"])(location.href,"?"),f=S.a.parse(m);f.fileName=p,f.documentName=f.fileName,u=f}var g=u.subjectId,j=u.ouid,x=a.withdrawalUrl,v=a.withdrawalResult,E=a.isLogin,N=a.providerName,k=Object(l["useState"])(null),I=Object(s["a"])(k,2),T=I[0],C=I[1],P=Object(l["useState"])(null),D=Object(s["a"])(P,2),U=D[0],B=D[1],M=Object(l["useState"])("\u5f53\u524d\u672a\u767b\u5f55\uff0c\u8bf7\u626b\u7801\u767b\u5f55"),L=Object(s["a"])(M,2),F=L[0],R=L[1],A=Object(l["useRef"])(),_=Object(l["useState"])(null),K=Object(s["a"])(_,2),J=K[0],V=K[1],G=Object(l["useRef"])(),q=function(){var e={clientCode:n,providerName:N,sourceName:"CA_MOBILE"};Object(w["g"])(e).then((function(e){if(0==e.data.code){"cloudReader"!=u.appName&&"iSignatureHTML5"!=u.appName&&eSign.UrlContainer.SetTitle("\u64a4\u9500\u7b7e\u7ae0");var a={wishResult:"1",logOutSessionJson:{sourcesType:1,clientCode:String(n)}};"cloudReader"!=u.appName&&"iSignatureHTML5"!=u.appName&&eSign.UrlContainer.SetStatus(JSON.stringify(a)),j!=e.data.subjectLists[0].identityInfo.ouid?(V(!1),R("\u5f53\u524d\u767b\u5f55\u8d26\u53f7\u4e0d\u80fd\u64a4\u9500\u6b64\u5370\u7ae0\uff0c\u8bf7\u91cd\u65b0\u626b\u7801\u767b\u5f55"),t({type:"indexPageModel/logout",payload:{providerName:N,clientCode:n,sourceName:"CA_MOBILE"}}),z()):(t({type:"indexPageModel/providerName",payload:{providerName:e.data.subjectLists[0].providerName||"\u62db\u7b7e\u5b9d"}}),t({type:"indexPageModel/SetDeleteInfos",payload:{clientCode:n,sourceName:"CA_MOBILE",providerName:e.data.subjectLists[0].providerName||"\u62db\u7b7e\u5b9d"}}))}}))},H=function(e){var t={clientCode:n,sourceName:"CA_MOBILE",providerName:e};Object(w["i"])(t).then((function(e){var t=e.data,a=t.data.url,n=t.reMark;C(a),B(n),Object(h["vb"])("scanTypeTip",n,1)}))},Y=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t({type:"indexPageModel/GetDeleteResult",payload:{clientCode:n,sourceName:"CA_MOBILE"}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(a,r){var o,s;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return"cloudReader"!=u.appName&&"iSignatureHTML5"!=u.appName&&eSign.UrlContainer.SetTitle("\u626b\u7801\u767b\u5f55"),o={clientCode:n,sourceName:"CA_MOBILE"},e.next=4,Object(O["h"])(o);case 4:s=e.sent,s.data&&1!=s.data.status?(clearInterval(A.current),A.current=null,t({type:"indexPageModel/resetWithdrawalUrl"}),r||H(a),setTimeout((function(){W(a,"callBack")}),1e3)):(C(null),q(),A.current=setInterval((function(){Y()}),2e3));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={clientCode:n,sourceName:"CA_MOBILE",providerName:localStorage.getItem("ProviderName")||"e\u7b7e\u76fe"},e.next=3,Object(w["h"])(a).then((function(e){var a=e.data,n=a.code,r=a.message,c=a.CAProviderList;0==n?(t({type:"indexPageModel/providerName",payload:{providerName:c[0].providerName}}),W(c[0].providerName)):R(r)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l["useEffect"])((function(){if(v){var e={subjectId:g,wishResult:"0",logOutSessionJson:{sourcesType:1,clientCode:String(n)}},a={clientCode:String(n),version:u.version||"",optionInfo:{optionName:"delSign",optionTypeInfo:{logType:u.logType||"",logSubType:u.logSubType||""},optionResult:""},documentName:u.documentName||"",documentID:u.documentID||"",appName:u.appName||"",signSN:u.signSN||"",signName:u.signName||"",subjectID:u.subjectId||""};if(t({type:"indexPageModel/resetWithdrawalUrl",payload:{}}),Object(w["A"])(n,a).then((function(e){e.data.code})),clearInterval(A.current),"cloudReader"!=u.appName&&"iSignatureHTML5"!=u.appName)eSign.UrlContainer.SetResult(JSON.stringify(e));else{var r={type:"deleteSeal",keySN:u.subjectId||""};window.parent.postMessage(r,"*")}}}),[v]),Object(l["useEffect"])((function(){z()}),[]),Object(l["useImperativeHandle"])(r,(function(){return{setClientCode:function(e){n=e,localStorage.setItem("deleteSealCode",e),z()},init:function(e){"MOBILE"==e?z():(clearInterval(A.current),clearInterval(G.current),A.current=null,G.current=null)},test:function(){}}})),i.a.createElement("div",{className:b.a.scanDeletePage},i.a.createElement("div",{className:b.a.wishScanPage},x&&i.a.createElement("div",null,i.a.createElement("div",{className:b.a.wishScanTitle},N||"e\u7b7e\u76fe"),i.a.createElement("div",{className:b.a.wishScanBody},i.a.createElement("div",{className:b.a.scanBox},x.startsWith("http")?i.a.createElement(y.a,{size:160,value:x}):i.a.createElement("img",{style:{width:"200px",height:"200px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},src:"data:image/png;base64,"+x})),i.a.createElement("div",{style:{color:"red",fontSize:"14px",margin:"5px 0"}},"\u5df2\u767b\u5f55\uff0c\u8bf7\u626b\u7801\u786e\u5b9a\u64a4\u9500\u7b7e\u7ae0")),i.a.createElement("div",{className:b.a.wishScanFooter},i.a.createElement("div",{className:b.a.scanTip},Object(h["z"])("scanTypeTip")?Object(h["z"])("scanTypeTip"):"e\u7b7e\u76fe"===N?"\u8bf7\u4f7f\u7528\u652f\u4ed8\u5b9d/\u5fae\u4fe1\u6216e\u7b7e\u5b9dAPP\u626b\u7801":""))),(0==E&&!x||J)&&i.a.createElement("div",null,i.a.createElement("div",{className:b.a.wishScanTitle},N||"e\u7b7e\u76fe"),i.a.createElement("div",{className:b.a.wishScanBody},i.a.createElement("div",{className:b.a.scanBox},T&&(T.startsWith("http")?i.a.createElement(y.a,{size:160,value:T}):i.a.createElement("img",{style:{width:"200px",height:"200px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},src:"data:image/png;base64,"+T}))),T&&F&&i.a.createElement("div",{style:{color:"red",fontSize:"14px",margin:"5px 0"}},F)),i.a.createElement("div",{className:b.a.wishScanFooter},i.a.createElement("div",{className:b.a.scanTip},U)))))},v=Object(u["a"])((function(e){var t=e.indexPageModel;return{state:t}}))(Object(d["n"])(x)),E=(a("fOrg"),a("+KLJ")),N=(a("5Dmo"),a("3S7+")),k=(a("2qtc"),a("kLXV")),I=a("J0qb"),T=a.n(I),C=a("OVbu"),P=a.n(C),D=a("lht2"),U=a.n(D),B=a("JYHG"),M=a("z0WU"),L=function(e){var t=e.content;return i.a.createElement("div",null,t)},F=Object(u["a"])((function(e){var t=e.indexPageModel;return{state:t}}))(Object(d["n"])(L)),R=function(e){var t=e.clientCode,a=e.changeWishType,n=e.location.query,r=e.onRef,u=Object(M["g"])(),d=Object(h["Z"])(location.href,"documentName=","&signSN");if(d){var p=Object(h["wb"])(location.href,"?"),m=S.a.parse(p);m.fileName=d,m.documentName=m.fileName,n=m}var f=localStorage.getItem("deleteSealCode");f&&"0"!=f&&f!=t&&(t=f);var b=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a,r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["e"])(t,"TG_TIMEVALE");case 2:a=e.sent,a&&1==a.status?"cloudReader"==n.appName||"iSignatureHTML5"==n.appName?(r={type:"deleteSeal",sealId:n.sealID},window.parent.postMessage(r,"*")):Z():a&&401==a.code?(clearTimeout(z.current),_(null),ee()):z.current=setTimeout((function(){b()}),1e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=Object(l["useState"])(null),y=Object(s["a"])(g,2),j=y[0],x=y[1],v=Object(l["useState"])(null),I=Object(s["a"])(v,2),C=I[0],D=I[1],L=Object(l["useState"])(null),R=Object(s["a"])(L,2),A=R[0],_=R[1],K=Object(l["useState"])(0),J=Object(s["a"])(K,2),V=J[0],G=J[1],q=Object(l["useState"])(P.a),H=Object(s["a"])(q,2),Y=H[0],W=H[1],z=Object(l["useRef"])(),X=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["D"])(t,8);case 2:a=e.sent,0==a.code&&location.reload();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e={wishResult:"0",subjectId:n.subjectId||"",logOutSessionJson:{sourcesType:1,clientCode:String(t)}},a={clientCode:String(t),version:n.version||"",optionInfo:{optionName:"delSign",optionTypeInfo:{logType:n.logType||"",logSubType:n.logSubType||""},optionResult:""},documentName:n.documentName||"",documentID:n.documentID||"",appName:n.appName||"",signSN:n.signSN||"",signName:n.signName||"",subjectID:n.subjectId||""};Object(w["A"])(t,a).finally((function(){try{eSign.UrlContainer.SetResult(JSON.stringify(e))}catch(t){}}))},Q=function(){if("cloudReader"!==n.appName&&"iSignatureHTML5"!=n.appName){var e=document.getElementById("loginIframe"),t=e.contentWindow.document,a=t.getElementsByTagName("head"),r=document.createElement("link");r.id="newstyle",r.href=location.href.startsWith("https")?"https://local.kinggrid.com:9582/files/iframe.css":"http://local.kinggrid.com:9581/files/iframe.css",r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),a[0].appendChild(r)}},$=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.token&&!n.tCode){e.next=4;break}return a={token:n?n.token:"",code:n.code&&void 0!=n.code&&"undefined"!=n.code?decodeURIComponent(n.code):"",refreshToken:n?n.refreshToken:"",tokeneffectivetime:n?n.tokeneffectivetime:"",tokenCreateTime:n?n.tokenCreateTime:"",userCode:n?n.clientUserCode:"",signatureMode:n.SignatureMode||0,tCode:n&&n.tCode?n.tCode:""},e.next=4,Object(O["K"])(t,"TG_TIMEVALE",a,n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var r,s,l,d,p,m,f,g,y,h,j,S;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!=t&&t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(O["C"])(t,"TG_TIMEVALE");case 4:return r=e.sent,r&&r instanceof Array&&G(r.length),e.next=8,Object(O["b"])("TG_TIMEVALE",t,n.token?n.token:"");case 8:if(s=e.sent,!s||0!=s.code){e.next=35;break}if(0!=s.isLogin){e.next=18;break}return l=location.href.split("/#/")[1],e.next=14,Object(O["k"])("TG_TIMEVALE",t,"",1,"");case 14:d=e.sent,0==d.code?(p=d.data.url+"?isClient=1&referer="+encodeURIComponent("".concat(u,"#/").concat(l)),D(null),x(i.a.createElement("iframe",{id:"loginIframe",className:"model_iframe",width:"100%","min-height":"400px",border:"none",src:p}))):k["a"].error({content:d}),e.next=33;break;case 18:if(1!=s.isLogin){e.next=33;break}return m={sourceName:"TG_TIMEVALE",sealSN:n.sealSN||"",sealID:n.sealID||n.signSN||"",clientType:"pc",redirectUrl:encodeURI(location.href),providerName:""},e.next=22,Object(O["r"])(t);case 22:return f=e.sent,e.next=25,Object(O["u"])(t,n.SignatureMode||0,f,"CLOUD");case 25:return g=e.sent,g&&g instanceof Array&&g.map(function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(t){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:1==t.subjectType&&_(t.identityInfo.userName);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=29,Object(O["f"])(t,"TG_TIMEVALE",m);case 29:if(y=e.sent,y){e.next=32;break}return e.abrupt("return");case 32:0==y.code?(D(null),b(),x(i.a.createElement("iframe",{id:"loginIframe",onLoad:Q,className:"model_iframe",width:"100%","min-height":"400px",border:"none",src:y.data.url}))):(D(y.message),y.message.indexOf("\u65e0\u6743")>-1?W(U.a):W(P.a));case 33:e.next=40;break;case 35:return h=location.href.split("/#/")[1],e.next=38,Object(O["k"])("TG_TIMEVALE",t,"",1,"");case 38:j=e.sent,0==j.code?(S=j.data.url+"?isClient=1&referer="+encodeURIComponent("".concat(u,"#/").concat(h)),D(null),x(i.a.createElement("iframe",{id:"loginIframe",className:"model_iframe",width:"100%","min-height":"400px",border:"none",src:S}))):k["a"].error({content:j});case 40:window.parent!=window&&"cloudReader"!==n.appName&&"iSignatureHTML5"!==n.appName&&(a("CLOUD"),$(),x(null),window.parent.location.reload());case 41:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(l["useImperativeHandle"])(r,(function(){return{setClientCode:function(e){t=e,localStorage.setItem("deleteSealCode",e),ee()},init:function(e){"CLOUD"==e&&ee()}}})),Object(l["useEffect"])((function(){ee()}),[]),i.a.createElement("div",{className:T.a.tyDeletePage},A&&i.a.createElement("div",{className:T.a.personBox},i.a.createElement("span",{className:T.a.personNameLabel},"\u5f53\u524d\u7528\u6237\uff1a"),i.a.createElement(N["a"],{title:A},i.a.createElement("span",{className:T.a.personName},A)),i.a.createElement("span",{className:T.a.loginOutBtn,onClick:X},"\u7acb\u5373\u5207\u6362"),V>1&&i.a.createElement(E["a"],{message:"\u68c0\u6d4b\u5230\u8d85\u8fc71\u628aUKey\uff0c\u8bf7\u79fb\u9664\u591a\u4f59\u7684UKey",type:"warning",showIcon:!0,closable:!0})),C&&i.a.createElement(B["a"],{text:C,src:Y,block:!0}),!C&&i.a.createElement("div",null,j&&i.a.createElement(F,{content:j})))},A=Object(u["a"])((function(e){var t=e.indexPageModel;return{state:t}}))(Object(d["n"])(R)),_=(a("+L6B"),a("2/Rp")),K=(a("sRBo"),a("kaz8")),J=(a("5NDa"),a("5rEg")),V=(a("y8nQ"),a("Vl3Y")),G=a("bV22"),q=a.n(G),H=a("L2qd"),Y=function(e){var t=e.clientCode,a=e.onRef,n=e.location.query,r=Object(l["useState"])(n.subjectId),u=Object(s["a"])(r,2),d=u[0],p=u[1],m=Object(l["useState"])(0),f=Object(s["a"])(m,2),b=f[0],g=f[1],y=Object(l["useState"])(null),j=Object(s["a"])(y,2),S=j[0],x=j[1],v=Object(l["useState"])(!1),E=Object(s["a"])(v,2),N=E[0],k=E[1],I=V["a"].useForm(),T=Object(s["a"])(I,1),C=T[0],D=Object(l["useRef"])(""),U=localStorage.getItem("deleteSealCode");U&&"0"!=U&&U!=t&&(t=U),Object(l["useEffect"])((function(){M()}),[]);var M=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a,r;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["z"])(t,"KG_CLOUD",n.SignatureMode);case 2:if(a=e.sent,D.current=null===a||void 0===a?void 0:a.pinmode,r=n.subjectId,r){e.next=9;break}return e.next=8,L(n.certSN);case 8:r=e.sent;case 9:p(r),Object(O["u"])(t).then((function(e){var t=0,a=0;e&&e instanceof Array&&(r||n.certSN)&&e.forEach((function(e){r&&e.subjectID==r?t=1:n.certSN&&n.certSN==e.certSN&&(a=1)})),g(1!=t&&1!=a?2:1)})),Object(O["v"])(t,r).then((function(e){e?(e=h["a"].decode(e),C.setFieldsValue({password:e,remember:!!e})):C.setFieldsValue({remember:!1,password:""})}));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(a){var r,o,s,l;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["r"])(t);case 2:return r=e.sent,e.next=5,Object(O["u"])(U,n.SignatureMode,r,"UKEY");case 5:return o=e.sent,o&&o.constructor===Array&&(l=o.filter((function(e){return e.certSN==a})),l[0]&&(s=l[0].subjectID,n.wishType||(n.wishType=l[0].caType))),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){k(!1),"editSuccess"==e&&(Object(O["J"])(t,d,""),C.setFieldsValue({remember:!1,password:""}))},R=function(e){e.password?Object(O["n"])(t,d,e.password,n.wishType,D.current).then(function(){var a=Object(o["a"])(Object(c["a"])().mark((function a(r){var o,s;return Object(c["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("success"!=r){a.next=10;break}return x(null),Object(h["vb"])("subjectsId",""),o={clientCode:String(t),version:n.version||"",optionInfo:{optionName:"delSign",optionTypeInfo:{logType:n.logType||"",logSubType:n.logSubType||""},optionResult:""},documentName:n.documentName||"",documentID:n.documentID||"",appName:n.appName||"",signSN:n.signSN||"",signName:n.signName||"",subjectID:d||""},Object(w["A"])(t,o).then((function(e){e.data.code})),a.next=7,Object(O["J"])(t,d,e.remember?D.current>=1?h["a"].encode(e.password):e.password:"",!1,D.current);case 7:"cloudReader"!=n.appName&&"iSignatureHTML5"!=n.appName?eSign.UrlContainer.SetResult(JSON.stringify({wishResult:"0"})):(s={type:"deleteSeal",keySN:d||""},window.parent.postMessage(s,"*")),a.next=12;break;case 10:x(r),Object(O["J"])(t,d,"");case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()):Object(O["J"])(t,d,"")},A=function(e){e.target.value||x(null)},G=function(){g(0),M()};return Object(l["useImperativeHandle"])(a,(function(){return{setClientCode:function(e){t=e,localStorage.setItem("deleteSealCode",e),M()},init:function(e){"UKEY"==e&&M()}}})),i.a.createElement("div",{className:q.a.ukeyDeletePage},!N&&i.a.createElement("div",null,1==b&&i.a.createElement("div",{className:q.a.wishUkeyPage},i.a.createElement(V["a"],{form:C,labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:!1},onFinish:R,autoComplete:"off",className:"".concat(q.a.pinForm," wishPinForm")},i.a.createElement(V["a"].Item,{label:"UKey PIN\u7801\uff1a",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165PIN\u7801"}]},i.a.createElement(J["a"].Password,{onChange:A,className:q.a.pinInput})),S&&i.a.createElement(V["a"].Item,{className:"".concat(q.a.errFormItem," wishErrFormItem"),name:"errTip",wrapperCol:{offset:6,span:18}},i.a.createElement("span",null,S)),i.a.createElement(V["a"].Item,null,i.a.createElement(V["a"].Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:6,span:18}},i.a.createElement(K["a"],null,"\u8bb0\u4f4fPIN\u7801")),i.a.createElement("span",{onClick:function(){k(!0)},className:q.a.editPwd},"\u4fee\u6539PIN\u7801")),i.a.createElement(V["a"].Item,{className:q.a.htmlBtnBox},i.a.createElement(_["a"],{className:q.a.htmlBtn,type:"primary",htmlType:"submit"},"\u786e\u5b9a")))),2==b&&i.a.createElement("div",{className:q.a.wishUkeyErrPage},i.a.createElement(B["a"],{src:P.a,text:"\u8bf7\u63d2\u5165\u539f\u59cbUKey,\u7136\u540e\u518d\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01",block:!0},i.a.createElement(_["a"],{type:"link",onClick:G},"\u7acb\u5373\u5237\u65b0")))),N&&i.a.createElement(H["a"],{wishType:n.wishType,subjectId:d,clientCode:t,title:"\u4fee\u6539PIN\u7801",pinmode:D.current,onSubmit:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){onSubmit(e)})),onshow:F}))},W=Object(u["a"])((function(e){var t=e.indexPageModel;return{state:t}}))(Object(d["n"])(Y)),z=a("rrqX"),X=a.n(z),Z=a("+JY7"),Q=a("biJ1"),$=a.n(Q),ee=function(e){var t=e.clientCode,a=e.onRef,n=e.location.query,r=Object(l["useState"])(n.subjectId),u=Object(s["a"])(r,2),d=u[0],p=u[1],m=Object(l["useState"])(0),f=Object(s["a"])(m,2),b=f[0],g=f[1],y=Object(l["useState"])(null),j=Object(s["a"])(y,2),S=j[0],x=j[1],v=Object(l["useState"])(!1),E=Object(s["a"])(v,2),N=E[0],k=E[1],I=V["a"].useForm(),T=Object(s["a"])(I,1),C=T[0],D=V["a"].useForm(),U=Object(s["a"])(D,1),M=U[0],L=Object(l["useState"])([]),F=Object(s["a"])(L,2),R=F[0],A=F[1],G=Object(l["useState"])(!1),q=Object(s["a"])(G,2),Y=q[0],W=q[1],z=Object(l["useState"])(""),Q=Object(s["a"])(z,2),ee=Q[0],te=Q[1],ae=Object(l["useRef"])(""),ne=localStorage.getItem("deleteSealCode");ne&&"0"!=ne&&ne!=t&&(t=ne),Object(l["useEffect"])((function(){re()}),[]);var re=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a,r,o,s;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["z"])(t,"KG_CLOUD",n.SignatureMode);case 2:return a=e.sent,ae.current=null===a||void 0===a?void 0:a.pinmode,e.next=6,Object(O["r"])(t);case 6:if(r=e.sent,A(r),o=n.subjectId,o){e.next=13;break}return e.next=12,ce(n.certSN);case 12:o=e.sent;case 13:return p(o),e.next=16,Object(Z["b"])({clientCode:t,sourceName:"KG_CLOUD"});case 16:s=e.sent,W(s.data.isLogin),s.data.isLogin&&ie();case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(t){var a,r,o;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["u"])(ne,n.SignatureMode,R,"KG_CLOUD");case 2:return a=e.sent,a&&a.constructor===Array&&(o=a.filter((function(e){return e.certSN==t})),o[0]&&(r=o[0].subjectID,n.wishType||(n.wishType=o[0].caType))),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){k(!1),"editSuccess"==e&&(Object(O["J"])(t,d,""),C.setFieldsValue({remember:!1,password:""}))},se=function(e){e.password&&(Object(O["J"])(t,d,e.remember?ae.current>=1?h["a"].encode(e.password):e.password:"",!1,ae.current),Object(O["n"])(t,d,e.password,n.wishType,ae.current).then(function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(a){var r,o;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:"success"==a?(x(null),Object(h["vb"])("subjectsId",""),r={clientCode:String(t),version:n.version||"",optionInfo:{optionName:"delSign",optionTypeInfo:{logType:n.logType||"",logSubType:n.logSubType||""},optionResult:""},documentName:n.documentName||"",documentID:n.documentID||"",appName:n.appName||"",signSN:n.signSN||"",signName:n.signName||"",subjectID:d||""},Object(w["A"])(t,r).then((function(e){e.data.code})),"cloudReader"!=n.appName&&"iSignatureHTML5"!=n.appName?eSign.UrlContainer.SetResult(JSON.stringify({wishResult:"0"})):(o={type:"deleteSeal",keySN:d||""},window.parent.postMessage(o,"*"))):x(a);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},le=function(e){x(null)};Object(l["useImperativeHandle"])(a,(function(){return{setClientCode:function(e){t=e,localStorage.setItem("deleteSealCode",e),re()},init:function(e){"KG_CLOUD"==e&&re()}}}));var ie=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(O["u"])(t,n.SignatureMode,R,"KG_CLOUD").then((function(e){var t=0,a=0;e&&e instanceof Array&&(d||n.certSN)&&e.forEach((function(e){d&&e.subjectID==d?t=1:n.certSN&&n.certSN==e.certSN&&(a=1)}));var r=1!=t&&1!=a?2:1;g(r),2===r&&te("\u5f53\u524d\u8d26\u53f7\u65e0\u6743\u9650\u64a4\u9500\uff01"),ue(r)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(a){return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(2!==a){e.next=2;break}return e.abrupt("return");case 2:Object(O["v"])(t,d).then((function(e){e?(e=h["a"].decode(e),C.setFieldsValue({password:e,remember:!!e})):C.setFieldsValue({remember:!1,password:""})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(a){var r,o,s,l,i;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(O["B"])(t,"KG_CLOUD",n.SignatureMode,a.keySn,a.password,"");case 2:r=e.sent,o=r.code,s=r.message,0===o?(te(""),W(!0),l=Object(h["e"])(a.keySn),i=a.remember?Object(h["e"])(a.password):"",Object(h["vb"])("KG_CLOUD",JSON.stringify({keySn:l,password:i}),7),ie()):te(s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){W(!1),te("")};return i.a.createElement("div",{className:X.a.ukeyDeletePage},ee&&i.a.createElement(B["a"],{text:ee,src:2===b?P.a:$.a,block:!0,customStyle:{paddingTop:"100px"}},i.a.createElement(_["a"],{type:"link",onClick:pe},"\u91cd\u65b0\u767b\u5f55")),!ee&&i.a.createElement(i.a.Fragment,null,!N&&i.a.createElement(i.a.Fragment,null,Y&&i.a.createElement("div",null,1==b&&i.a.createElement("div",{className:X.a.wishUkeyPage},i.a.createElement(V["a"],{form:C,initialValues:{remember:!1},onFinish:se,autoComplete:"off",className:"".concat(X.a.pinForm," wishPinForm")},i.a.createElement(V["a"].Item,{label:"UKey PIN\u7801\uff1a",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165PIN\u7801"}]},i.a.createElement(J["a"].Password,{onChange:le,className:X.a.pinInput})),S&&i.a.createElement(V["a"].Item,{className:"".concat(X.a.errFormItem," wishErrFormItem"),name:"errTip",wrapperCol:{offset:6,span:18}},i.a.createElement("span",null,S)),i.a.createElement(V["a"].Item,null,i.a.createElement(V["a"].Item,{label:"",name:"remember",valuePropName:"checked",style:{textAlign:"right"}},i.a.createElement(K["a"],null,"\u8bb0\u4f4fPIN\u7801"))),i.a.createElement(V["a"].Item,{className:X.a.htmlBtnBox},i.a.createElement(_["a"],{className:X.a.htmlBtn,type:"primary",htmlType:"submit"},"\u786e\u5b9a"))))),!Y&&i.a.createElement(V["a"],{form:M,labelAlign:"right",onFinish:de,className:X.a.form},i.a.createElement(V["a"].Item,{label:"\u5bc6\u94a5\u76d8\u5e8f\u53f7\uff1a",name:"keySn",hasFeedback:!0,validateStatus:!0,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7cfb\u5217\u53f7"}]},i.a.createElement(J["a"],{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5e8f\u5217\u53f7"})),i.a.createElement(V["a"].Item,{label:"\u5bc6\u94a5\u76d8\u5bc6\u7801\uff1a",name:"password",hasFeedback:!0,validateStatus:!0,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u94a5\u76d8\u5bc6\u7801"}]},i.a.createElement(J["a"].Password,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})),i.a.createElement(V["a"].Item,{name:"remember",valuePropName:"checked",style:{textAlign:"right"}},i.a.createElement(K["a"],null,"\u8bb0\u4f4f\u5bc6\u7801")),i.a.createElement("div",{className:X.a.formBtn},i.a.createElement(_["a"],{type:"primary",danger:!0,htmlType:"submit"},"\u786e\u8ba4")))),N&&i.a.createElement(H["a"],{wishType:n.wishType,subjectId:d,clientCode:t,pinmode:ae.current,title:"\u4fee\u6539PIN\u7801",onSubmit:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){onSubmit(e)})),onshow:oe})))},te=Object(u["a"])((function(e){var t=e.indexPageModel;return{state:t}}))(Object(d["n"])(ee)),ae=a("0OBr"),ne=a("8mW0"),re=a.n(ne),ce=a("YDkJ"),oe=a.n(ce),se=a("mnoa"),le=a.n(se),ie=function(e){var t=e.dispatch,a=e.state,n=e.clientCode,r=e.onRef,u=e.location.query,d=localStorage.getItem("deleteSealCode");d&&"0"!=d&&d!=n&&(n=d);var p=Object(l["useState"])(u.subjectId),m=Object(s["a"])(p,2),f=m[0],b=m[1],g=Object(l["useState"])(null),y=Object(s["a"])(g,2),j=y[0],S=y[1],w=Object(l["useState"])(!1),x=Object(s["a"])(w,2),v=x[0],E=x[1],k=a.supportMode,I=a.supportActive,T=a.cloudIsLogin,C=a.willID,D=a.willUrl,U=a.cloudErrorText,M=a.pinErrorText,L=a.errorText,F=a.accountName,R=a.permit,A=V["a"].useForm(),G=Object(s["a"])(A,1),q=G[0],Y=Object(l["useRef"])(null);Object(l["useEffect"])((function(){X()}),[]),Object(l["useEffect"])((function(){S(L)}),[L]),Object(l["useEffect"])((function(){if("cloud"===I){var e={sourceName:"USP_UKEY",sealSN:u.sealSN||"",sealID:u.sealID||u.signSN||""};t({type:"platformDeleteModel/deleteAuthInfo",payload:{clientCode:n,reqData:e}})}}),[I]);var W=function(e){E(!1),"editSuccess"==e&&(Object(O["J"])(n,f,""),q.setFieldsValue({password:""}),q.setFieldsValue({remember:!1}))},z=function(e){e.password?t({type:"platformDeleteModel/ukeyOnFinish",payload:{clientCode:n,subjectId:f,remember:remember,password:e.password,query:u}}):Object(O["J"])(n,f,"")},X=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!=n&&n){e.next=2;break}return e.abrupt("return");case 2:return t({type:"platformDeleteModel/save",payload:{supportActive:null}}),e.next=5,Object(O["c"])(n,"USP_UKEY",u.sealSN||u.sealID);case 5:a=e.sent,"string"==typeof a?S(a):(b(a.subjectID),Object(O["v"])(n,a.subjectID).then((function(e){e?(e=h["a"].decode(e),q.setFieldsValue({password:e,remember:!!e})):q.setFieldsValue({remember:!1,password:""})}))),t({type:"platformDeleteModel/getSealSource",payload:n});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l["useEffect"])((function(){C&&t({type:"platformDeleteModel/getWillResult",payload:{clientCode:n,willID:C,appName:u.appName}})}),[C]);var Z=function(e){e.target.value||t({type:"platformDeleteModel/save",payload:{pinErrorText:null}})};Object(l["useImperativeHandle"])(r,(function(){return{setClientCode:function(e){t({type:"platformDeleteModel/save",payload:{noneText:null}}),n=e,localStorage.setItem("deleteSealCode",e),X()},init:function(e){"USP_CLOUD"==e&&(S(null),X())}}}));var Q=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(){var a;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t({type:"platformDeleteModel/cloudLogOut",payload:n}),t({type:"platformDeleteModel/save",payload:{willUrl:null,willID:null}}),a={sourceName:"USP_UKEY",sealSN:u.sealSN||"",sealID:u.sealID||u.signSN||""},t({type:"platformDeleteModel/deleteAuthInfo",payload:{clientCode:n,reqData:a}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){Y.current&&clearInterval(Y.current),t({type:"platformDeleteModel/save",payload:{supportActive:"cloud"===I?"ukey":"cloud",ukeyErrorText:null,cloudErrorText:null,loginUrl:null,willID:null,willUrl:null,cloudIsLogin:!1,accountName:""}})},te=function(){t({type:"platformDeleteModel/save",payload:{errorText:null,normalSupport:"ukey"}}),X()};return i.a.createElement("div",{className:re.a.ukeyDeletePage},"ukey"===I&&i.a.createElement(i.a.Fragment,null,k.length>1&&i.a.createElement("div",{className:re.a.switch},i.a.createElement("div",null,i.a.createElement("img",{src:le.a,alt:"icon"}),i.a.createElement("span",{className:re.a.switchText,onClick:ee},"\u8d26\u53f7\u767b\u5f55"))),!v&&i.a.createElement("div",null,!j&&i.a.createElement("div",{className:re.a.wishUkeyPage},i.a.createElement(V["a"],{form:q,labelCol:{span:6},wrapperCol:{span:18},initialValues:{remember:!1},onFinish:z,autoComplete:"off",className:"".concat(k.length>1?re.a.pinForm1:re.a.pinForm," wishPinForm")},i.a.createElement(V["a"].Item,{label:"UKey PIN\u7801\uff1a",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165PIN\u7801"}]},i.a.createElement(J["a"].Password,{onChange:Z,className:re.a.pinInput})),M&&i.a.createElement(V["a"].Item,{className:"".concat(re.a.errFormItem," wishErrFormItem"),name:"errTip",wrapperCol:{offset:6,span:18}},i.a.createElement("span",null,M)),i.a.createElement(V["a"].Item,null,i.a.createElement(V["a"].Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:6,span:18}},i.a.createElement(K["a"],null,"\u8bb0\u4f4fPIN\u7801")),i.a.createElement("span",{onClick:function(){E(!0)},className:re.a.editPwd},"\u4fee\u6539PIN\u7801")),i.a.createElement(V["a"].Item,{className:re.a.htmlBtnBox},i.a.createElement(_["a"],{className:re.a.htmlBtn,type:"primary",htmlType:"submit"},"\u786e\u5b9a")))),j&&i.a.createElement("div",{className:re.a.wishUkeyErrPage},i.a.createElement(B["a"],{text:j,src:P.a,block:!0},i.a.createElement(_["a"],{type:"link",onClick:te},"\u7acb\u5373\u5237\u65b0")))),v&&i.a.createElement(H["a"],{title:"\u4fee\u6539PIN\u7801",subjectId:f,clientCode:n,wishType:"USP_UKEY",onSubmit:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){onSubmit(e)})),onshow:W})),"cloud"===I&&i.a.createElement(i.a.Fragment,null,!T&&!F&&k.length>1&&i.a.createElement("div",{className:re.a.switch},i.a.createElement("div",null,i.a.createElement("img",{src:oe.a,alt:"icon"}),i.a.createElement("span",{className:re.a.switchText,onClick:ee},"UKEY\u767b\u5f55"))),(T||F)&&1!=R&&i.a.createElement("div",{className:re.a.triggerUkey},i.a.createElement("span",null,"\u5f53\u524d\u7528\u6237: "),i.a.createElement(N["a"],{title:F},i.a.createElement("span",null,F)),i.a.createElement(_["a"],{type:"link",onClick:Q},"\u7528\u6237\u5207\u6362")),U&&i.a.createElement(B["a"],{text:U,src:0==R?P.a:$.a,block:!0,customStyle:{paddingTop:"100px"}}),!U&&i.a.createElement("div",{className:k.length>1?re.a.iframeContainer:re.a.iframeContainer1},C&&i.a.createElement(ae["a"],{id:"Iframe",src:D,className:re.a.iframe}))))},ue=Object(u["a"])((function(e){return{state:e.platformDeleteModel}}))(Object(d["n"])(ie)),de=a("1JJI"),pe=a("NFT5"),me=a.n(pe),fe=function(e){var t=e.location,a=t.pathname,u=t.query;u=Object(M["k"])(u);var d=Object(l["useState"])(u.beforeStep?u.beforeStep.split(","):null),p=Object(s["a"])(d,1),f=p[0],b=Object(l["useState"])(null),g=Object(s["a"])(b,2),y=g[0],j=g[1],S=Object(l["useState"])(null),w=Object(s["a"])(S,2),x=w[0],E=w[1],N=Object(l["useState"])(null),k=Object(s["a"])(N,2),I=k[0],T=k[1],C=Object(l["useState"])(null),P=Object(s["a"])(C,2),D=P[0],U=P[1],B=Object(l["useState"])(!0),L=Object(s["a"])(B,2),F=L[0],R=L[1],_=Object(l["useState"])(null),K=Object(s["a"])(_,2),J=K[0],V=K[1],G=Object(l["useState"])(u.wishType),q=Object(s["a"])(G,2),H=q[0],Y=q[1],z=Object(l["useRef"])(null),X=Object(l["useRef"])(null),Z=Object(l["useRef"])(null),Q=Object(l["useRef"])(null),$=Object(l["useRef"])(null),ee=Object(l["useRef"])(null),ae=Object(l["useRef"])(a.match(/\/(\S*)\//)[1]),ne=function(e){Y(e)},re=function(e){var t;return"UKEY"==e?t=i.a.createElement(W,{changeWishType:ne,onRef:z,clientCode:ae.current}):"KG_CLOUD"===e?t=i.a.createElement(te,{changeWishType:ne,onRef:Z,clientCode:ae.current}):"USP_CLOUD"==e?t=i.a.createElement(ue,{changeWishType:ne,onRef:$,clientCode:ae.current}):"CLOUD"==e?t=i.a.createElement(A,{changeWishType:ne,onRef:X,clientCode:ae.current}):"MOBILE"==e&&(t=i.a.createElement(v,{actKey:y,changeWishType:ne,onRef:Q,clientCode:ae.current})),t},ce=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(t){var a,n;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.setItem("deleteSealCode",t),e.next=3,Object(O["E"])(t);case 3:return e.next=5,Object(O["t"])(t);case 5:if(a=e.sent,n=Object(M["h"])(a),!n){e.next=9;break}return e.abrupt("return");case 9:ae.current=t,z.current&&z.current.setClientCode(t),Z.current&&Z.current.setClientCode(t),X.current&&X.current.setClientCode(t),Q.current&&Q.current.setClientCode(t),$.current&&$.current.setClientCode(t),oe(t,!0);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(o["a"])(Object(c["a"])().mark((function e(t,n){var o,s,l,d,p,f,b,g,y;return Object(c["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(V(null),o=null,"0"!=ae.current&&ae.current){e.next=11;break}return e.next=5,Object(O["g"])();case 5:return s=e.sent,s&&(ae.current=s),e.next=9,Object(O["o"])();case 9:o=e.sent,o&&o instanceof Array&&(s||(ae.current=o[0].user_code),ee.current=o);case 11:return l=t||("0"!=ae.current&&ae.current||!o[0]?ae.current:o[0].user_code),localStorage.setItem("deleteSealCode",l),e.next=15,Object(O["r"])(l);case 15:if(d=e.sent,d){e.next=19;break}return V("\u672a\u914d\u7f6e\u5370\u7ae0\u6e90, \u8bf7\u914d\u7f6e\u540e\u91cd\u8bd5"),e.abrupt("return");case 19:if(d=d.filter((function(e){return"TG_SAAS"!==e.sourceName})),U(d),p=[],f=0,b=!1,d&&"string"==typeof d&&p.push({key:"1",label:i.a.createElement("div",{style:{display:"none"}},"\u9519\u8bef"),children:i.a.createElement("div",{style:{textAlign:"center"}},d)}),d&&d.constructor===Array&&d.forEach((function(e,t){var a=Object(h["E"])(m.a,e.sourceType),n=re(e.sourceType);p&&"UKEY"==e.sourceType&&JSON.stringify(p).indexOf("UKEY\u7b7e\u7ae0")>-1?b=!0:("UKEY"==e.sourceType&&(f=t+1),"USP_CLOUD"===e.sourceType?"PDF"!==u.appName&&"OFD"!==u.appName&&"pdf"!==u.docType&&"ofd"!==u.docType||p.push({key:t+1,label:a,children:n}):("ofd"!==u.docType&&"OFD"!==u.appName||"MOBILE"!==e.sourceType)&&p.push({key:t+1,label:a,children:n}))})),g=Object(h["D"])(H,d),o&&o.length>1&&T(i.a.createElement(r["a"],{onChange:ce,defaultValue:ae.current,style:{width:"200px",marginRight:"16px"}},o&&o.map((function(e,t){return i.a.createElement(Option,{key:t,value:e.user_code},e.user_name)})))),j("CA_UKEY"!=H&&"KG_UKEY"!=H||!b?g:f),E(p),n||localStorage.setItem("deleteSealCode",a.match(/\/(\S*)\//)[1]),window.parent==window){e.next=38;break}if(!u.token&&!u.tCode){e.next=38;break}return R(!1),y={token:u?u.token:"",code:u.code&&void 0!=u.code&&"undefined"!=u.code?decodeURIComponent(u.code):"",refreshToken:u?u.refreshToken:"",tCode:u&&u.tCode?u.tCode:"",refreshCode:u&&u.refreshCode?u.refreshCode:"",tokeneffectivetime:u?u.tokeneffectivetime:"",tokenCreateTime:u?u.tokenCreateTime:"",userCode:u?u.clientUserCode:"",signatureMode:u.SignatureMode||0},e.next=37,Object(O["K"])(ae.current,"TG_TIMEVALE",y,u);case 37:window.parent.location.reload();case 38:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(l["useEffect"])((function(){u.baseUrl&&Object(M["s"])(u.baseUrl),u.XServiceAddress&&Object(M["t"])(u.XServiceAddress),oe()}),[]);var se=function(e){if("MOBILE"==e||"CLOUD"==e){var t={clientcode:ae.current,sourceList:[{signatureMode:u.SignatureMode||0,sourceName:"MOBILE"==e?"CA_MOBILE":"TG_TIMEVALE"}]};"cloudReader"!=u.appName&&"iSignatureHTML5"!=u.appName&&Object(h["db"])("SetResult",JSON.stringify(t))}},le=function(e){var t=D?D[e-1]:"";j(e),"UKEY"==t.sourceType?z.current&&(z.current.init(t.sourceType),Q.current&&Q.current.init(t.sourceType)):"CLOUD"==t.sourceType?X.current&&(X.current.init(t.sourceType),Q.current&&Q.current.init(t.sourceType)):"MOBILE"==t.sourceType?Q.current&&Q.current.init(t.sourceType):"USP_CLOUD"==t.sourceType?$.current&&$.current.init(t.sourceType):"KG_CLOUD"==t.sourceType&&Z.current&&Z.current.init(t.sourceType)};return i.a.createElement("div",{className:"".concat(m.a.deleteSealPage," deleteSealPage")},F&&i.a.createElement(i.a.Fragment,null,!J&&i.a.createElement("div",null,f&&i.a.createElement(de["a"],{handleCallback:se}),!f&&i.a.createElement(n["a"],{tabBarExtraContent:I,activeKey:y,items:x,onChange:le})),J&&i.a.createElement("div",{className:m.a.error},i.a.createElement("img",{src:me.a}),i.a.createElement("div",{className:m.a.errorText},J))))};t["default"]=Object(u["a"])((function(e){var t=e.indexPageModel;return{state:t}}))(Object(d["n"])(fe))},bV22:function(e,t,a){e.exports={ukeyDeletePage:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-ukeyDeletePage",wishUkeyPage:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-wishUkeyPage",pinInput:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-pinInput",pinForm:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-pinForm",htmlBtnBox:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-htmlBtnBox",htmlBtn:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-htmlBtn",wishScanPage:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-wishScanPage",wishScanTitle:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-wishScanTitle",wishScanBody:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-wishScanBody",scanBox:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-scanBox",wishScanFooter:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-wishScanFooter",scanTip:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-scanTip",scanErr:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-scanErr",errFormItem:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-errFormItem",editPwd:"antd-pro-pages-delete-seal-compoents-ukey-delete-index-editPwd"}},rrqX:function(e,t,a){e.exports={ukeyDeletePage:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-ukeyDeletePage",wishUkeyPage:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-wishUkeyPage",pinForm:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-pinForm",htmlBtnBox:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-htmlBtnBox",htmlBtn:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-htmlBtn",wishScanPage:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-wishScanPage",wishScanTitle:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-wishScanTitle",wishScanBody:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-wishScanBody",scanBox:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-scanBox",wishScanFooter:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-wishScanFooter",scanTip:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-scanTip",scanErr:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-scanErr",errFormItem:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-errFormItem",editPwd:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-editPwd",form:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-form",formBtn:"antd-pro-pages-delete-seal-compoents-kg-cloud-delete-index-formBtn"}},tuei:function(e,t,a){e.exports={deleteSealPage:"antd-pro-pages-delete-seal-index-deleteSealPage",codeSelect:"antd-pro-pages-delete-seal-index-codeSelect",error:"antd-pro-pages-delete-seal-index-error",errorText:"antd-pro-pages-delete-seal-index-errorText"}}}]);