(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"0qLy":function(e,n,t){e.exports={loginPage:"antd-pro-pages-client-login-index-loginPage",loginLeft:"antd-pro-pages-client-login-index-loginLeft",loginRegisterLeft:"antd-pro-pages-client-login-index-loginRegisterLeft",loginRight:"antd-pro-pages-client-login-index-loginRight",loginHeader:"antd-pro-pages-client-login-index-loginHeader",loginBody:"antd-pro-pages-client-login-index-loginBody",qrBox:"antd-pro-pages-client-login-index-qrBox",qrBoxSpan:"antd-pro-pages-client-login-index-qrBoxSpan",qrCodeExpire:"antd-pro-pages-client-login-index-qrCodeExpire",qrCodeMask:"antd-pro-pages-client-login-index-qrCodeMask",qrBoxWH:"antd-pro-pages-client-login-index-qrBoxWH",qrBoxNetErr:"antd-pro-pages-client-login-index-qrBoxNetErr",loginLeftTit:"antd-pro-pages-client-login-index-loginLeftTit",loginLeftContent:"antd-pro-pages-client-login-index-loginLeftContent",loginFooterForm:"antd-pro-pages-client-login-index-loginFooterForm",loginFooterRegister:"antd-pro-pages-client-login-index-loginFooterRegister",docActColor:"antd-pro-pages-client-login-index-docActColor",avatarTs:"antd-pro-pages-client-login-index-avatarTs",mg16Point:"antd-pro-pages-client-login-index-mg16Point",docAgree:"antd-pro-pages-client-login-index-docAgree",textLeft:"antd-pro-pages-client-login-index-textLeft",hasAccount:"antd-pro-pages-client-login-index-hasAccount",qrCodeText:"antd-pro-pages-client-login-index-qrCodeText",qrCodeIcon:"antd-pro-pages-client-login-index-qrCodeIcon",close:"antd-pro-pages-client-login-index-close"}},byXT:function(e,n,t){"use strict";t.r(n);var a=t("qLMh"),c=t("9og8"),o=t("tJVT"),i=t("q1tI"),r=t.n(i),l=t("Ty5D"),s=t("/MKj"),u=t("D1Df"),d=t.n(u),g=t("YOho"),p=t("+n12"),f=t("0qLy"),x=t.n(f),b=t("cjvt"),v=t("1Mg5"),O=t("H3/i"),j=function(e){var n=e.dispatch,t=e.state,l=t.networkStatus,s=t.wxUserInfoContentId,u=t.wxScanStatus,f=t.scanUrl,j=t.hasUserInfo,m=t.userInfo,S=Object(i["useState"])(null),h=Object(o["a"])(S,2),y=h[0],I=h[1],w=Object(i["useState"])(!1),C=Object(o["a"])(w,2),L=C[0],k=C[1],E=Object(i["useState"])(!1),M=Object(o["a"])(E,2),P=M[0],q=M[1],N=Object(i["useState"])(null),B=Object(o["a"])(N,2),R=B[0],T=B[1],U=Object(i["useState"])(null),A=Object(o["a"])(U,2),F=A[0],D=A[1],H=Object(i["useState"])(!1),W=Object(o["a"])(H,2),J=W[0],z=W[1],K=Object(i["useState"])(0),V=Object(o["a"])(K,2),X=V[0],Y=V[1],G=Object(i["useState"])(null),Q=Object(o["a"])(G,2),Z=Q[0],$=Q[1],_=Object(i["useState"])(null),ee=Object(o["a"])(_,2),ne=ee[0],te=ee[1],ae=Object(i["useState"])(null),ce=Object(o["a"])(ae,2),oe=ce[0],ie=ce[1],re=Object(i["useState"])(!1),le=Object(o["a"])(re,2),se=le[0],ue=le[1],de=Object(i["useState"])(null),ge=Object(o["a"])(de,2),pe=ge[0],fe=ge[1],xe=Object(i["useState"])(null),be=Object(o["a"])(xe,2),ve=be[0],Oe=be[1],je=Object(i["useState"])(null),me=Object(o["a"])(je,2),Se=me[0],he=me[1],ye=Object(i["useRef"])(),Ie=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(t,c){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n({type:"indexPageModel/scanResultWx",payload:{sceneId:t,loginId:c}});case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),we=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return I(null),clearInterval(ye.current),e.next=4,n({type:"indexPageModel/restScanUrl"});case 4:return e.next=6,n({type:"indexPageModel/applyWxScan"});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n({type:"indexPageModel/userInfo"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i["useEffect"])((function(){te(s)}),[s]),Object(i["useEffect"])((function(){0===u?(clearInterval(ye.current),n({type:"indexPageModel/restScanUrl"}),m||Ce(),z(!1)):432101!==u&&432102!==u&&10000023!=u||(z(!0),clearInterval(ye.current),Y(1),Te.current.clearSuccess())}),[u,m]),Object(i["useEffect"])((function(){700==l&&(T("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u786e\u4fdd\u7f51\u7edc\u901a\u4fe1\u6b63\u5e38\uff01"),D("\u63d0\u793a"),q(!0),clearInterval(ye.current))}),[l]);var Le=function(){k(!L)};Object(i["useEffect"])((function(){m?(n({type:"indexPageModel/restScanUrl"}),n({type:"indexPageModel/getOrg",payload:{accountId:m.base.accountUid}}),z(!1),ke(),eSign.invoke("sensors","v1","SensorsClientLogin","wxscan",m.loginInfo.idcard.mobile,"OK")):ye.current||we()}),[m]);var ke=function(){var e={person:{ouid:m.base.ouid,name:m.prop.properties.name,realName:m.baseRealname.status,phone:m.loginInfo.idcard.mobile},compony:[]};Object(p["M"])(m.base.accountUid).then((function(t){t&&t instanceof Array?(t.map((function(n){var t={orgId:n.orgId,orgName:n.orgName,realName:n.realName,guid:n.guid};e.compony.push(t)})),eSign.invoke("account","v1","SetAccountInfo",JSON.stringify(e)).then((function(){eSign.invoke("account","v1","LoginStatue",0).then((function(e){eSign.invoke("home","v1","SetLoginDlgState",0),n({type:"indexPageModel/clealScanStatus"})}))})).catch((function(){}))):eSign.invoke("account","v1","SetAccountInfo",JSON.stringify(e)).then((function(e){eSign.invoke("account","v1","LoginStatue",0).then((function(){eSign.invoke("home","v1","SetLoginDlgState",0),n({type:"indexPageModel/clealScanStatus"})}))}))}))};Object(i["useEffect"])((function(){var e=null,n=null;if(f&&f.indexOf("?")>-1){var t=f.split("?")[0];e=Object(p["R"])(f,"loginId"),n=Object(p["R"])(f,"sceneId"),$(e),ie(n),I(t)}if(f&&!j){var a=0;ye.current=setInterval((function(){a++,a>=60?(a=0,clearInterval(ye.current),Ee()):Ie(n,e)}),1e3)}else clearInterval(ye.current),I(null),$(null),ie(null)}),[f,j]);var Ee=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return I(null),clearInterval(ye.current),e.next=4,n({type:"indexPageModel/applyWxScan"});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){q(!1)},Pe=function(){q(!1)};window.initLoad=function(){n({type:"indexPageModel/userInfo"}),Object(p["mb"])().then((function(e){e&&0!=e.length?n({type:"indexPageModel/getOrg",payload:{accountId:e.data.base.accountUid}}):(n({type:"indexPageModel/restScanUrl"}),I(null),we(),n({type:"indexPageModel/restLoginFalse"}))}))};var qe=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(n){var t,c,o,i,r;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return he("300px"),t=null,c="",1==n?c="e\u7b7e\u5b9d\u670d\u52a1\u534f\u8bae":2==n?c="\u9690\u79c1\u653f\u7b56":3==n&&(c="\u6570\u5b57\u8bc1\u4e66\u670d\u52a1\u534f\u8bae"),""!==c&&(fe(c),o=Object(p["v"])(),t=Object(p["F"])(o,c)),e.next=7,Object(p["w"])(t);case 7:i=e.sent,r=Object(p["b"])(i.content),Oe(r),ue(!0);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(!1);case 2:Object(p["mb"])().then((function(e){e?n({type:"indexPageModel/resetWxScanStatus"}):(n({type:"indexPageModel/restScanUrl"}),I(null),we(),n({type:"indexPageModel/restLoginFalse"}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){z(!0)},Re=function(){var e=Object(c["a"])(Object(a["a"])().mark((function e(n){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z(!1);case 2:n?eSign.invoke("home","v1","SetLoginDlgState",1):eSign.invoke("account","v1","LoginStatue",0).then((function(){eSign.invoke("home","v1","SetLoginDlgState",0)}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Te=Object(i["useRef"])(null);return window.clearInterClient=function(){I(null),clearInterval(ye.current),n({type:"indexPageModel/restScanUrl"}),q(!1),z(!1),ue(!1),Te.current&&Te.current.closeIsBind()},r.a.createElement("div",{className:x.a.loginPage},r.a.createElement("div",{className:x.a.loginLeft},r.a.createElement("div",{className:x.a.loginLeftTit},"e\u7b7e\u5b9d\u8d26\u53f7\u767b\u5f55"),r.a.createElement("div",{className:x.a.loginLeftContent},"\u5728\u7ebf\u7b7e\u7f72\uff0c\u5b89\u5168\u9ad8\u6548"),r.a.createElement("div",{className:x.a.loginLeftContent},"\u7535\u5b50\u5370\u7ae0\u968f\u8eab\u5e26\uff0c\u968f\u65f6\u968f\u5730\u5b89\u5168\u7b7e")),r.a.createElement("div",{className:x.a.loginRight},r.a.createElement("div",{className:x.a.loginHeader},"\u626b\u7801\u767b\u5f55"),r.a.createElement("div",{className:x.a.loginBody},r.a.createElement("div",{className:y?x.a.qrBox:"".concat(x.a.qrBox," ").concat(x.a.qrBoxNetErr)},y&&r.a.createElement(d.a,{size:160,value:y}),r.a.createElement("span",{className:x.a.qrCodeText},"\u8bf7\u4f7f\u7528\u5fae\u4fe1\u626b\u7801\u767b\u5f55/\u6ce8\u518c"),r.a.createElement("span",{className:x.a.qrCodeIcon},r.a.createElement(g["a"],{style:{color:"#ffffff",fontSize:"22px",marginTop:"5px"}})))),r.a.createElement("div",{className:x.a.loginFooter})),r.a.createElement(v["a"],{handleOk:Me,handleCancel:Pe,visible:P,content:R,title:F}),r.a.createElement(O["a"],{isMask:X,onRef:Te,clearInterClient:clearInterClient,lorClose:Re,changeHandleCheck:Le,handleCheck:L,showAgreement:qe,changeVisible:Be,sceneId:oe,loginId:Z,userInfoContextId:ne,visible:J,handleCancel:Ne,title:"\u7ed1\u5b9a\u624b\u673a\u53f7"}),r.a.createElement(b["a"],{mbHeight:Se,visible:se,content:ve,title:pe,handleOk:function(e){e.stopPropagation(),e.preventDefault(),ue(!1)},handleCancel:function(e){e.stopPropagation(),e.preventDefault(),ue(!1)}}))};n["default"]=Object(s["c"])((function(e){var n=e.indexPageModel;return{state:n}}))(Object(l["n"])(j))}}]);