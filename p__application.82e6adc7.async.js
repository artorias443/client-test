(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"3PfA":function(e,a,t){e.exports={application:"antd-pro-pages-application-index-application",section:"antd-pro-pages-application-index-section",contentTitle:"antd-pro-pages-application-index-contentTitle",li:"antd-pro-pages-application-index-li",imgBox:"antd-pro-pages-application-index-imgBox",appNameSpan:"antd-pro-pages-application-index-appNameSpan",progress:"antd-pro-pages-application-index-progress",categoryTitle:"antd-pro-pages-application-index-categoryTitle"}},"Rc/5":function(e,a,t){"use strict";t.r(a);t("14J3");var n=t("BMrR"),r=(t("jCWc"),t("kPKH")),i=(t("5Dmo"),t("3S7+")),c=(t("MXD1"),t("CFYs")),o=t("oBTY"),p=t("qLMh"),s=t("9og8"),l=t("tJVT"),u=(t("IzEo"),t("bx4M")),d=t("q1tI"),f=t.n(d),m=t("3PfA"),g=t.n(m),v=t("Tex+"),x=u["a"].Meta,E=function(){document.title="\u5e94\u7528\u4e2d\u5fc3";var e=Object(d["useState"])([]),a=Object(l["a"])(e,2),t=a[0],m=a[1],E=Object(d["useRef"])([]),S=Object(d["useRef"])(null),b=Object(d["useState"])([]),y=Object(l["a"])(b,2),N=y[0],h=y[1];Object(d["useEffect"])((function(){return Object(s["a"])(Object(p["a"])().mark((function e(){var a,t;return Object(p["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,eSign.invoke("basic","v1","GetCurSelProject");case 2:if(a=e.sent,!a){e.next=9;break}return S.current=JSON.parse(a).user_code,e.next=7,Object(v["r"])(S.current);case 7:t=e.sent,Array.isArray(t)&&h(t.map((function(e){return e.sourceName})));case 9:case"end":return e.stop()}}),e)})))(),eSign.AddEventListener("main_change_project",(function(e){if(e){var a=JSON.parse(e);location.href="".concat(a.user_url,"#/application/index")}})),function(){eSign.RemoveEventListener("appListUpdate",(function(){})),eSign.RemoveEventListener("appStateUpdate",(function(){})),eSign.RemoveEventListener("main_change_project",(function(){}))}}),[]),Object(d["useEffect"])((function(){0!==N.length&&(eSign.AddEventListener("appListUpdate",(function(e){if(e){var a=JSON.parse(e),t=a.data,n=t.data,r=t.code,i=t.msg;if((200===r||0===r&&null===i)&&a.clientcode===S.current&&Array.isArray(n)){var c=[];n.forEach((function(e){var a=!0;if(e.percent=0,200===r){var t=e.desc.indexOf("(");if(0===t){var n=e.desc.indexOf(")");if(-1!==n){var o=e.desc.substring(t+1,n),p=o.split("-");if(e.type=p[0],p[1]){var s=p[1].split(";");e.sourceName=s;var l=Array.from(new Set([].concat(N,s)));l.length===s.length+N.length&&(a=!1)}e.desc=e.desc.substring(n+1)}}}if(0===r&&null===i)if(e.type=e.moduleName,""===e.sealSource)e.sourceName="";else if(e.sourceName=e.sealSource.split(","),0!==e.sourceName.length){var u=Array.from(new Set([].concat(N,e.sourceName)));u.length===e.sourceName.length+N.length&&(a=!1)}if(a){e.type||(e.type="\u5176\u4ed6");var d=c.findIndex((function(a){return a.type===e.type}));-1===d?c.push({type:e.type,data:[e]}):c[d].data.push(e)}})),E.current=c,m(c)}}})),eSign.AddEventListener("appStateUpdate",(function(e){if(e){var a=JSON.parse(e);if(0===a.data.code){var t=Object(o["a"])(E.current),n=t.findIndex((function(e){return e.url==="app://".concat(a.appid)}));if(-1!==n){t[n].isLoading=3!==a.data.status;var r=a.data.progress;t[n].strokeColor=j(r),t[n].percent=r,E.current=t,m(t)}}}})),eSign.invoke("CloudAppMgr","v1","RequestApplist",S.current))}),[N]);var O=function(e){var a=e.url;if(!e.isLoading){var t=a.indexOf("app://");if(-1!==t){var n=a.substring(6);eSign.invoke("CloudAppMgr","v1","RunApp",n)}else eSign.invoke("browser","v1","OpenUrl",a,"")}},j=function(e){return 0===e?"#e4e4e4":e<=30?"#ee5d28":e<=50?"#f03434":e<=70?"#3972f2":"#f9a62a"};return f.a.createElement("div",{className:g.a.application},f.a.createElement("section",{className:g.a.section},f.a.createElement("div",{className:g.a.li},t.map((function(e){return f.a.createElement("div",{key:e.type},f.a.createElement("div",{className:g.a.categoryTitle},e.type),f.a.createElement(n["a"],{gutter:8},e.data.map((function(e){return f.a.createElement(r["a"],{key:e.name,span:3,xl:2},f.a.createElement(i["a"],{title:e.desc},f.a.createElement(u["a"],{onClick:function(){O(e)},bodyStyle:{padding:"0"},style:{cursor:"pointer",height:"68px",margin:"3px 10px 17px 3px"},bordered:!1,cover:f.a.createElement("div",{className:g.a.imgBox},f.a.createElement("img",{alt:"example",src:e.ico}))},!e.isLoading&&f.a.createElement(x,{className:g.a.appName,title:f.a.createElement("span",{className:g.a.appNameSpan},e.name)}),e.isLoading&&f.a.createElement("div",{className:g.a.progress},f.a.createElement(c["a"],{size:"small",strokeColor:e.strokeColor,trailColor:"#E4E4E4",showInfo:!1,percent:e.percent})))))}))))})))))};a["default"]=E}}]);